{% extends 'contents/base.html' %}
{% load django_bootstrap5 %}

{% block header %}
<div class = "container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <h2><a class="navbar-brand" href="#">YourTansuu2</a></h2>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                  <h5><a class="nav-link" href="{% url 'account_control' %}">アカウント情報</a></h5>
              </li>
              <li class="nav-item">
                <h5><a class="nav-link" href="#">お問合わせ</a></h5>
              </li>
              <li class="nav-item">
                <h5><a class="nav-link" href="{% url 'original_logout' %}">ログアウト</a></h5>
              </li>
              <li class="nav-item">
                <h5><a class="nav-link" href="{% url 'index' %}">ホームに戻る</a></h5>
              </li>
              <li class="nav-item">
                <h5><a class="nav-link" href="{% url 'home' %}">トップに戻る</a></h5>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    </div>

{% endblock header %}



{% block content %}
<div class="container">
    {{ form.errors }}
<form action='' method='POST' enctype="multipart/form-data">
    <h2>アパレル登録機能</h2>
    {% csrf_token %}
    {% bootstrap_form form %}
    <input type = 'hidden' name = 'action' value = 'confirm'>
    {% bootstrap_button button_type="submit" content="新規登録" %}
    <input type="hidden" id="id_item_image_base64" name="item_image_base64" />
</form>
<a href="{% url 'index' %}"button class="w-100 btn btn-lg btn-primary" type="submit">ホームに戻る</a></button>
</div>

<script>
  function upload_img() {
    const file = this.files[0];
    const reader = new FileReader();
    const item_image_base64 = document.getElementById('id_item_image_base64');

    reader.addEventListener("load", function () {
      item_image_base64.value = reader.result;
    }, false);

    if (file) {
      reader.readAsDataURL(file);
    }
  }
  document.getElementById('id_item_image').addEventListener("change", upload_img);
</script>
{% endblock content %}